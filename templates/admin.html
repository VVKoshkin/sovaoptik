<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Админпанель</title>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/admin.css') }}"
    />
</head>
<body>
{% if authorized %}
<div class="container">
<h1>Авторизован!</h1>
<h2>Информация сверху</h2>
<section class="top-info">
    <table id="top_table" class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Это телефон</th>
                <th scope="col">Отметить жирным</th>
                <th style="width:50%" scope="col">Текст</th>
                <th style="width:10%" scope="col">Порядок на странице</th>
          </tr>
        </thead>
        <tbody>
            {% for rec in topInfo %}
            <tr data-id="{{ rec.id }}" class="top-table__row">
                <td><input name="isPhone" type="checkbox" {% if rec.is_phone %} checked {% endif %}/></td>
                <td><input name="isBold" type="checkbox" {% if rec.is_bold %} checked {% endif %}/></td>
                <td>
                    <input
                            class="text-info_input"
                            type="text"
                            value="{{ rec.text }}"
                            placeholder="Введите текст записи"
                            name = "text"
                            required
                    />
                </td>
                <td>
                    <input type="text"
                        placeholder="Введите порядок записи на странице"
                        name="order"
                        value="{{ rec.order }}"
                        class="text-info_order"
                    />
                </td>
                <td><input name="delButton" type="button" value="Удалить" class="btn btn-danger"/></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <input type="button" class="btn btn-success" name="addButton" value="Добавить"/>
    <input type="button" class="btn btn-primary" name="saveButton" value="Сохранить"/>
</section>
<hr>
<section class="slider">
    <h2>Картинки на слайдере</h2>
    <div class="slider-pics" id = "slider_cards">
        {% for rec in sliderInfo %}
        <div class="slider-pic" data-id = "{{ rec.id }}" data-filename = "{{ rec.ref }}">
            <img
                    class="slider-pic__img mb-2"
                    src="/static/img/slider/{{ rec.ref }}"
                    alt="{{ rec.inner_text }}"
            />
            <input
                    class="slider-pic__text mb-2"
                    type="text"
                    value="{{ rec.inner_text }}"
                    placeholder="Введите описание под картинку"
            />
            <input class="btn btn-danger" type="button" value="Удалить" name="delButton"/>
        </div>
        {% endfor %}
    </div>
    <input type="button" class="btn btn-success mb-2" name="addButton" value="Добавить"/>
    <input type="button" class="btn btn-primary mb-2" name="saveButton" value="Сохранить"/>
    
    <div class="custom-file d-none" name = "file-uploader">
        <input type="file" multiple accept="image/jpeg" name = "file-uploader" class="custom-file-input">
    </div>
</section>
<hr>
<section class="low-prices">
    <h2>Информация о невысоких ценах (список)</h2>
    <div id = "low_prices">
        {% for rec in lowPrice %}
        <div class="low-price mb-2" data-id = "{{ rec.id }}">
            <input
                    class = "low-price__text"
                    type="text"
                    value="{{ rec.text }}"
                    placeholder="Введите текст"
            />
            <input class="btn btn-danger" type="button" value="Удалить" name="delButton"/>
        </div>
        {% endfor %}
    </div>
    <input type="button" class="btn btn-success mb-2" name="addButton" value="Добавить"/>
    <input type="button" class="btn btn-primary mb-2" name="saveButton" value="Сохранить"/>
</section>
<hr>
<section class="assortment">
    <h2>Ассортимент</h2>
    <div id="assortment">
        {% for rec in assortment %}
        <div class="assortment-elem" data-id="{{ rec.id }}">
            <input
                    type="text"
                    class="assortment-elem__head"
                    value="{{ rec.header_text }}"
                    placeholder="Введите текст"
            />
            <div contenteditable="true" class="assortment-elem__descr">{{ rec.description_text }}</div>
            <input class="btn btn-danger mb-2" type="button" value="Удалить" name="delButton"/>
        </div>
        {% endfor %}
    </div>
    <input type="button" class="btn btn-success mb-2" name="addButton" value="Добавить"/>
    <input type="button" class="btn btn-primary mb-2" name="saveButton" value="Сохранить"/>
</section>
</div>
{% else %}
<form class="container" method="POST">
    {{ formAuth.csrf_token }}
    <div class="form-group">
        {{ formAuth.login.label }} {{ formAuth.login(class_="form-control mb-3") }}
    </div>
    <div class="form-group">
        {{ formAuth.password.label }} {{ formAuth.password(class_="form-control mb-3") }} 
    </div>

    {% for message in get_flashed_messages() %}
        <div class="alert alert-danger mb-3" role="alert">
            {{ message }}
        </div>
    {% endfor %}

        {{ formAuth.submit(class_="btn btn-primary") }}
</form>
{% endif %}


<script
        src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"
></script>
<script src="{{ url_for('static', filename='scripts/admin.js') }}"></script>

</body>
</html>
